\documentclass[class=minimal,border=0pt]{standalone}
\usepackage{../tumcolor}

\usepackage{pgfplots}
\usepackage{pgfplotstable}
\pgfplotsset{compat=newest}
\usetikzlibrary{pgfplots.groupplots}
\pgfplotsset{grid style={dotted}}
\usetikzlibrary{plotmarks}

\pgfplotsset{
    mark repeat*/.style={
        scatter,
        scatter src=x,
        scatter/@pre marker code/.code={
            \pgfmathtruncatemacro\usemark{
                (\coordindex==(\numcoords-#1)
            }
            \ifnum\usemark=0
                \pgfplotsset{mark=none}
            \fi
        },
        scatter/@post marker code/.code={}
    }
}

\begin{document}
%\pgfplotsset{
%    every non boxed x axis/.style={} 
%}
\tikzset{every mark/.append style={scale=1.2}}
\begin{tikzpicture}
\begin{axis}[
	width=10cm,
	height=6cm,
	xmode=log,
       log basis x={2},
       log ticks with fixed point,
	xmin=0.75, xmax=384,
	ymin=0, ymax=30,
	grid=major,
	xtick={1, 2, 4, 8, 16, 32, 64, 128, 256},
	ytick={0,10, 20, 30},
	ylabel=Packet rate {[}Mpps{]},
	xlabel={Batch size},
	legend style={font=\fontsize{7}{8}\selectfont},
%	tick label style={font=\fontsize{8}{9}\selectfont},
%	label style={font=\fontsize{8}{9}\selectfont},
	every axis legend/.append style={nodes={right}},
	legend entries={C, Rust, Go, C\#, OCaml, Swift, Haskell, Python},
	legend pos = north west, legend columns=2
]


\addplot [mark=none,color=TUMBlack, thick] coordinates {
(1, 8.32667)
(2, 14.31)
(4, 20.9377)
(8, 25.9783)
(16, 27.4429)
(32, 27.4423)
(64, 27.4457)
(128, 27.4389)
(256, 27.4417)
};
\addplot [mark=x,color=TUMDarkerBlue, thick]  coordinates {
(1,5.9)
(2,10.6)
(4,16.7)
(8,23.4)
(16,26.4)
(32,27.6)
(64,27.4)
(128,27.4)
(256,27.4)
};
\addplot [mark=triangle*,color=TUMGreen, thick]  coordinates {
		(1,3.3)
		(2,5.9)
		(4,9.8)
		(8,15.0)
		(16,19.0)
		(32,20.6)
		(64,23.5)
		(128,24.4)
		(256,24.8)
};
\addplot [mark=+,color=TUMOrange, thick]  coordinates {
		(1,2.5)
		(2,4.9)
		(4,9.0)
		(8,14.3)
		(16,19.0)
		(32,23.0)
		(64,25.6)
		(128,26.8)
};
\addplot [mark=diamond*,color=TUMYellow, thick]  coordinates {
(1    ,   0.08 * 2)
(2    ,   0.15 * 2)
(4    ,   0.30 * 2)
(8    ,   0.57 * 2)
(16  ,    1.02 * 2)
(32     , 1.71 * 2)
(64    ,  2.59 * 2)
(128 ,    3.91 * 2)
(256,     4.61 * 2)
(512,     3.88 * 2)
};
\addplot [mark=pentagon*,color=TUMPurple, thick]  coordinates {
(1,1.7)
(2,2.5)
(4,3.5)
(8,4.1)
(16,4.6)
(32,4.8)
(64,5.0)
(128,5.1)
(256,5.1)
};
\addplot [mark=*,color=TUMRed, thick]  coordinates {
(1, 1.99925 * 2)
(2, 2.74892 * 2)
(4, 3.55348 * 2)
(8, 4.19081 * 2)
(16, 4.60417 * 2)
(32, 4.7969 * 2)
(64, 4.97353 * 2)
(128, 5.00316 * 2)
(256, 4.9224 * 2)
};
\addplot [mark=square*,color=TUMIvony!50!black!70, thick]  coordinates { % Python
(1, 0.04* 2)
(2, 0.04* 2)
(4, 0.05* 2)
(8, 0.06* 2)
(16, 0.07* 2)
(32, 0.07* 2)
(64, 0.07 *2)
(128, 0.08 *2)
(256, 0.08 *2)
};


%\addplot[mark=none,color=black!60,forget plot,dashed,thick] coordinates {
%(0.75,29.76)
%(384,29.76)
%};
%\node[anchor = south,yshift=-0.2em] at (axis cs: 100,0.01) { 99th percentile};
\end{axis}
\end{tikzpicture}
\end{document}
